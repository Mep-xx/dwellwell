generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  tasks     Task[]
  trackables Trackable[]
}

model Trackable {
  id           String   @id @default(uuid())
  name         String
  type         String
  category     String
  brand        String?
  model        String?
  serialNumber String?
  imageUrl     String?
  notes        String?
  user         User     @relation(fields: [userId], references: [id])
  userId       String
  tasks        Task[]
}

enum TaskType {
  GENERAL
  AI_GENERATED
  USER_DEFINED
}

enum TaskStatus {
  PENDING
  COMPLETED
  SKIPPED
  SNOOZED
}

model Task {
  id                   String     @id @default(uuid())
  title                String
  description          String
  dueDate              DateTime
  status               TaskStatus @default(PENDING)
  recurrenceInterval   String
  criticality          String
  canDefer             Boolean
  deferLimitDays       Int
  estimatedTimeMinutes Int
  estimatedCost        Float
  canBeOutsourced      Boolean
  category             String
  location             String?
  imageUrl             String?
  icon                 String?

  taskType             TaskType   @default(GENERAL)

  // Relations
  itemName             String
  trackable            Trackable  @relation(fields: [trackableId], references: [id])
  trackableId          String
  user                 User       @relation(fields: [userId], references: [id])
  userId               String

  createdAt            DateTime   @default(now())
  updatedAt            DateTime   @updatedAt
}

model ApplianceCatalog {
  id        String   @id @default(uuid())
  brand     String
  model     String   @unique
  type      String
  category  String
  notes     String?
  imageUrl  String?
  createdAt DateTime @default(now())
}
